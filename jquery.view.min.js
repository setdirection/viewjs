(function(e){function x(f,g,i,h){h={data:h||(g?g.data:{}),_wrap:g?g._wrap:null,tmpl:null,parent:g||null,nodes:[],calls:G,nest:L,wrap:H,html:v,update:C};f&&e.extend(h,f,{nodes:[],parent:g});if(i){h.tmpl=i;h._ctnt=h._ctnt||h.tmpl(e,h);h.key=++s;(y.length?z:r)[s]=h}return h}function q(f,g,i){var h;i=i?e.map(i,function(l){return typeof l==="string"?f.key?l.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+w+'="'+f.key+'" $2'):l:q(l,f,l._ctnt)}):f;if(g)return i;i=i.join("");i.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,
function(l,j,a,c){h=e(a).get();I(h);if(j)h=D(j).concat(h);if(c)h=h.concat(D(c))});return h?h:D(i)}function D(f){var g=document.createElement("div");g.innerHTML=f;return e.makeArray(g.childNodes)}function J(f){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+e.trim(f).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,
function(g,i,h,l,j,a,c){g=e.tmpl.tag[h];if(!g)throw"Template command not found: "+h;h=g._default||[];if(a&&!/\w$/.test(j)){j+=a;a=""}if(j){j=A(j);c=c?","+A(c)+")":a?")":"";c=a?j.indexOf(".")>-1?j+A(a):"("+j+").call($item"+c:j;a=a?c:"(typeof("+j+")==='function'?("+j+").call($item):("+j+"))"}else a=c=h.$1||"null";l=A(l);return"');"+g[i?"close":"open"].split("$notnull_1").join(j?"typeof("+j+")!=='undefined' && ("+j+")!=null":"true").split("$1a").join(a).split("$1").join(c).split("$2").join(l||h.$2||
"")+"_.push('"})+"');}return _;")}function E(f,g){f._wrap=q(f,true,e.isArray(g)?g:[F.test(g)?g:e(g).html()]).join("")}function A(f){return f?f.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function I(f){function g(b){function k(M){M+=i;n=j[M]=j[M]||x(n,r[n.parent.key+i]||n.parent)}var m,o=b,n,u;if(u=b.getAttribute(w)){for(;o.parentNode&&(o=o.parentNode).nodeType===1&&!(m=o.getAttribute(w)););if(m!==u){o=o.parentNode?o.nodeType===11?0:o.getAttribute(w)||0:0;if(!(n=r[u])){n=z[u];n=x(n,r[o]||z[o]);
n.key=++s;r[s]=n}t&&k(u)}b.removeAttribute(w)}else if(t&&(n=e.data(b,"tmplItem"))){k(n.key);r[n.key]=n;o=(o=e.data(b.parentNode,"tmplItem"))?o.key:0}if(n){for(m=n;m&&m.key!=o;){m.nodes.push(b);m=m.parent}delete n._ctnt;delete n._wrap;e.data(b,"tmplItem",n)}}var i="_"+t,h,l,j={},a,c,d;a=0;for(c=f.length;a<c;a++)if((h=f[a]).nodeType===1){l=h.getElementsByTagName("*");for(d=l.length-1;d>=0;d--)g(l[d]);g(h)}}function G(f,g,i,h){if(!f)return y.pop();y.push({_:f,tmpl:g,item:this,data:i,options:h})}function L(f,
g,i){return e.tmpl(e.template(f),g,i,this)}function H(f,g){var i=f.options||{};i.wrapped=g;return e.tmpl(e.template(f.tmpl),f.data,i,f.item)}function v(f,g){var i=this._wrap;return e.map(e(e.isArray(i)?i.join(""):i).filter(f||"*"),function(h){if(g)h=h.innerText||h.textContent;else{var l;if(!(l=h.outerHTML)){l=document.createElement("div");l.appendChild(h.cloneNode(true));l=l.innerHTML}h=l}return h})}function C(){var f=this.nodes;e.tmpl(null,null,null,this).insertBefore(f[0]);e(f).remove()}var B=e.fn.domManip,
w="_tmplitem",F=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,r={},z={},p,K={key:0,data:{}},s=0,t=0,y=[];e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,g){e.fn[f]=function(i){var h=[];i=e(i);var l,j,a;l=this.length===1&&this[0].parentNode;p=r||{};if(l&&l.nodeType===11&&l.childNodes.length===1&&i.length===1){i[g](this[0]);h=this}else{j=0;for(a=i.length;j<a;j++){t=j;l=(j>0?this.clone(true):this).get();e(i[j])[g](l);h=h.concat(l)}t=0;
h=this.pushStack(h,f,i.selector)}i=p;p=null;e.tmpl.complete(i);return h}});e.fn.extend({tmpl:function(f,g,i){return e.tmpl(this[0],f,g,i)},tmplItem:function(){return e.tmplItem(this[0])},template:function(f){return e.template(f,this[0])},domManip:function(f,g,i){if(f[0]&&e.isArray(f[0])){for(var h=e.makeArray(arguments),l=f[0],j=l.length,a=0,c;a<j&&!(c=e.data(l[a++],"tmplItem")););if(c&&t)h[2]=function(d){e.tmpl.afterManip(this,d,i)};B.apply(this,h)}else B.apply(this,arguments);t=0;p||e.tmpl.complete(r);
return this}});e.extend({tmpl:function(f,g,i,h){var l=!h;if(l){h=K;f=e.template[f]||e.template(null,f);z={}}else if(!f){f=h.tmpl;r[h.key]=h;h.nodes=[];h.wrapped&&E(h,h.wrapped);return e(q(h,null,h.tmpl(e,h)))}if(!f)return[];if(typeof g==="function")g=g.call(h||{});i&&i.wrapped&&E(i,i.wrapped);g=e.isArray(g)?e.map(g,function(j){return j?x(i,h,f,j):null}):[x(i,h,f,g)];return l?e(q(h,null,g)):g},tmplItem:function(f){var g;if(f instanceof e)f=f[0];for(;f&&f.nodeType===1&&!(g=e.data(f,"tmplItem"))&&(f=
f.parentNode););return g||K},template:function(f,g){if(g){if(typeof g==="string")g=J(g);else if(g instanceof e)g=g[0]||{};if(g.nodeType)g=e.data(g,"tmpl")||e.data(g,"tmpl",J(g.innerHTML));return typeof f==="string"?e.template[f]=g:g}return f?typeof f!=="string"?e.template(null,f):e.template[f]||e.template(null,F.test(f)?f:e(f)):null},encode:function(f){return(""+f).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},
open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},
"!":{open:""}},complete:function(){r={}},afterManip:function(f,g,i){var h=g.nodeType===11?e.makeArray(g.childNodes):g.nodeType===1?[g]:[];i.call(f,g);I(h);t++}})})(jQuery);
(function(e,x,q){function D(a,c){for(var d=["bind","unbind","one"],b=0;b<d.length;++b)(function(k){c[k]=t(c[k],function(m){var o=p(arguments).slice(1);a[k].apply(a,o);return m.apply(m,o)})})(d[b])}function J(a,c){var d=p(arguments).slice(1);d=a.apply(a,d);c=="ready"&&E(this);return d}function E(a){if(!a._readyEventFired&&a._element&&y(a._element)){a.trigger("ready");a._readyEventFired=true;a._readyEventInterval&&clearInterval(a._readyEventInterval)}else"_readyEventInterval"in a||setTimeout(function(){if(a._element&&
y(a._element)){a.trigger("ready");a._readyEventFired=true}else a._readyEventInterval=setInterval(function(){if(a._element&&y(a._element)){a.trigger("ready");a._readyEventFired=true;clearInterval(a._readyEventInterval);a._readyEventInterval=false}},10)})}function A(a,c,d,b){if(!(b===q||b===null||b===false)){if(typeof b==="function"&&!C(b))b=b();if(b&&b.element&&b.element().nodeType==1&&b._attributes||typeof b.element=="function")c.push(b.element());else if(C(b))c.push((new b).element());else{if(typeof b===
"function")b=b();if(typeof b!=="string"&&typeof b!=="number"&&!r(b)&&!B(b)&&!(b&&(b.nodeType===1||b.nodeType===3)))for(attribute_name in b)d[attribute_name]=b[attribute_name];else{if(F(a,b))b=a.render(b);if(B(b))b=b.toArray();if(r(b)){var k=G(b);for(b=0;b<k.length;++b)A(a,c,d,k[b])}else if(w(b)){a=f?e(b):[b];for(b=0;b<a.length;++b)c.push(a[b])}else if(b&&(b.nodeType===1||b.nodeType===3)||typeof b==="string"||typeof b==="number")c.push(b)}}}}function I(a){var c,d,b,k,m;k=[];d={};for(c=1;c<arguments.length;++c)A(this,
k,d,arguments[c]);a=a.toLowerCase();if(f){if(document.attachEvent&&!x.opera&&(d.name||a=="input"&&d.type)){tag="<"+a;if(d.name)tag+=' name="'+d.name+'"';if(a=="input"&&d.type)tag+=' type="'+d.type+'"';tag+=">";delete d.name;delete d.type;m=document.createElement(tag)}else{i[a]||(i[a]=document.createElement(a));m=i[a].cloneNode(false)}e(m).attr(d);for(c=0;c<k.length;++c)k[c]&&(k[c].nodeType===1||k[c].nodeType===3)?m.appendChild(k[c]):m.appendChild(document.createTextNode(String(k[c])))}else{m="<"+
a;for(b in d)m+=" "+(l[b]||b)+'="'+d[b]+'"';if(k.length==0)m+=" />";else{m+=">";for(c=0;c<k.length;++c)m+=k[c];m+="</"+a+">"}}return m}function G(a){for(var c=[],d=0;d<a.length;++d)if(r(a[d]))c=c.concat(G(a[d]));else c.push(a[d]);return c}function L(a){return function(){for(var c=[a],d=0;d<arguments.length;++d)c.push(arguments[d]);return I.apply(this,c)}}function H(a){for(var c in g)c in a||(a[c]=g[c])}function v(a,c){for(var d in c)a[d]=c[d];return a}function C(a){return a&&a.prototype&&a.prototype._structure&&
a.prototype.element}function B(a){return typeof a=="object"&&"jquery"in a&&"length"in a}function w(a){return typeof a=="string"&&a.match(/^<[\w\W]+>/)}function F(a,c){if(typeof c!="string"||!a||!("constructor"in a&&"engine"in a.constructor))return false;var d=a.constructor.engine();if(d=="mustache")return c.match(/\{\{[^\}]+\}\}/);else if(d=="jquery.tmpl")return c.match(/\$\{[^\}]+\}/)}function r(a){return Object.prototype.toString.call(a)==="[object Array]"}function z(a,c){if(c.indexOf)return c.indexOf(a);
for(var d=0,b=c.length;d<b;d++)if(c[d]===a)return d;return-1}function p(a){if(!a)return[];for(var c=a.length||0,d=Array(c);c--;)d[c]=a[c];return d}function K(a){for(var c=p(arguments).slice(1),d=[],b=0;b<a.length;b++)z(a[b],c)>-1||d.push(a[b]);return d}function s(a,c){if(c===q)return a;if(arguments.length<3)return function(){return a.apply(c,arguments)};else{var d=p(arguments);d.shift();d.shift();return function(){return a.apply(c,d.concat(p(arguments)))}}}function t(a,c){return function(){return c.apply(this,
[s(a,this)].concat(p(arguments)))}}function y(a){for(a=a;a.parentNode;)a=a.parentNode;return!!a.body}var f="fn"in e&&"jquery"in e.fn;if(f&&Number(e.fn.jquery.replace(/\./g))<143)throw"jQuery View requires jQuery 1.4.3 or later.";e.view=function(a,c,d){var b;if(C(a)){b=a;a=c;c=d}if(typeof a=="string"){var k=String(a);a=function(){return k}}d=function n(){this._delegates=[];this._observers={};this._attributes={};this._changes={};for(var u=0;u<this.constructor._methodsToProxy.length;++u)this[this.constructor._methodsToProxy[u]]=
s(this[this.constructor._methodsToProxy[u]],this);this.initialize.apply(this,arguments);n._observers&&"ready"in n._observers&&E(this)};d._methodsToProxy=[];for(var m in c)d._methodsToProxy.push(m);d._observers={};d._instance=false;v(d,e.view.classMethods);if(b){v(d.prototype,b.prototype);d.prototype._structure=t(b.prototype._structure,function(n){return a.apply(this,[s(n,this)()])});for(m=0;m<b._methodsToProxy.length;++m)d._methodsToProxy.push(b._methodsToProxy[m])}else{v(d.prototype,e.view.fn);d.prototype._structure=
a}d.prototype.bind=t(d.prototype.bind,J);if(b){d._observers={};for(var o in b._observers)d._observers[o]=b._observers[o];d.prototype._observers={};D(d,b)}v(d.prototype,c||{});return d};e.view.classMethods={instance:function a(a){if(a===q){if(!this._instance)this._instance=new this}else this._instance=a;return this._instance},bind:function(a,c){var d=p(arguments);if(d[2]===q)d[2]=this;c=s.apply(e.view,[c].concat(d.slice(2)));if(typeof a==="string"&&c!==q){a in this._observers||(this._observers[a]=
[]);this._observers[a].push(c)}return c},unbind:function(a,c){a in this._observers||(this._observers[a]=[]);if(a&&c)this._observers[a]=K(this._observers[a],c);else if(a)this._observers[a]=[];else this._observers={}},one:function(a,c){var d=p(arguments);if(d[2]===q)d[2]=this;c=s.apply(e.view,[c].concat(d.slice(2)));var b=s(function(){var k=c.apply(this,arguments);this.unbind(a,b);return k},this);a in this._observers||(this._observers[a]=[]);this._observers[a].push(b);return b},trigger:function(a){if(!this._observers||
!this._observers[a]||this._observers[a]&&this._observers[a].length==0)return[];a in this._observers||(this._observers[a]=[]);for(var c=[],d=p(arguments).slice(1),b=0;b<this._observers[a].length;++b){var k=this._observers[a][b].apply(this._observers[a][b],d);if(k===false)return false;else c.push(k)}return c},ready:function(){var a=p(arguments);a.unshift("ready");return this.bind.apply(this,a)},engine:function a(a){if(a===q)return this._engine===q?e.view.defaultEngine:this._engine;else{if(a!="mustache"&&
a!="jquery.tmpl")throw'jQuery View error: "'+a+'" is not a supported template engine.';if(a=="mustache"&&!("Mustache"in x))throw"jQuery View error: Mustache engine required, download from http://wiki.github.com/janl/mustache.js/";if(a=="jquery.tmpl"&&!("tmpl"in e))throw"jQuery View error: jQuery Template engine required, download from https://github.com/jquery/jquery-tmpl";this._engine=a}}};e.view.fn={initialize:function(a){this.length=0;e.view.logging&&console.log("jQuery.View: initialized ",this,
" with attributes:",a);this.attributes(a||{});(a=this._structure())&&!this._element&&this.element(a);if(f&&(!this._element||!this._element.nodeType||this._element.nodeType!==1))throw"The view constructor must return either a DOM element or jQuery object, or call this.element() with a DOM element. View constructor returned:"+typeof this._element;this.trigger("initialized")},element:function a(a){if(a!==q){if(F(this,a))a=this.render(a);if(w(a))a=f?e(a)[0]:a;else if(B(a))a=a[0];this._element=a;this.length=
1;this[0]=this._element;if(this._delegates.length>0){for(var c=0;c<this._delegates.length;++c)this.delegate(this._delegates[c][0],this._delegates[c][1],this._delegates[c][2]);this._delegates=[]}}return this._element},attributes:function a(a,c){if(a!==q){var d={},b;for(b in this._attributes)d[b]=true;for(b in a){delete d[b];this.set(b,a[b],true)}for(b in d){this._changes[b]=null;delete this._attributes[d[b]]}c===q&&this.trigger("change",this._changes,this);this._changes={}}return this._attributes},
get:function(a){return this._attributes[a]},set:function(a,c,d){this._attributes[a]=c;this._changes[a]=c;if(d===q){this.trigger("change",this._changes);this._changes={}}return c},bind:e.view.classMethods.bind,unbind:e.view.classMethods.unbind,one:e.view.classMethods.one,trigger:function(a){if((!this.constructor._observers||!this.constructor._observers[a]||this.constructor._observers[a]&&this.constructor._observers[a].length==0)&&(!this._observers||!this._observers[a]||this._observers[a]&&this._observers[a].length==
0))return[];var c=p(arguments).slice(1),d=[];constructor_args=p(arguments).slice(1);constructor_args.unshift(this);constructor_args.unshift(a);var b=this.constructor.trigger.apply(this.constructor,constructor_args);if(b===false)return false;d=d.concat(b);a in this._observers||(this._observers[a]=[]);for(var k=0;k<this._observers[a].length;++k){b=this._observers[a][k].apply(this._observers[a][k],c);if(b===false)return false;else d.push(b)}return d},ready:e.view.classMethods.ready,emit:function(){var a=
p(arguments);return s(function(){return this.trigger.apply(this,a)},this)},map:function(a,c){var d=[];if(r(a))for(var b=0;b<a.length;++b)d.push(c.apply(this,[a[b],b]));else for(b in a)d.push(c.apply(this,[b,a[b]]));return d},delegate:function(a,c,d,b){if(b)d=s(d,b);this._element?e(this._element).delegate(a,c,d):this._delegates.push([a,c,d])},escape:function(a){return document.createTextNode(a)},render:function(a,c){var d=this.constructor.engine(),b={},k;for(k in this)if(z(k,["_delegates","_observers",
"_attributes","_changes"])==-1)b[k]=this[k];v(b,this.attributes());v(b,c);if(d=="jquery.tmpl")return e.tmpl(a,b);else if(d=="mustache")return Mustache.to_html(a,b)}};e.view.logging=false;e.view.defaultEngine="jquery.tmpl";for(var g={},i={},h="a abbr acronym address applet area b base basefont bdo big blockquote body br button canvas caption center cite code col colgroup dd del dfn dir div dl dt em embed fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link menu meta nobr noframes noscript object ol optgroup option p param pre q s samp script select small span strike strong style sub sup table tbody td textarea tfoot th thead title tr tt u ul var article aside audio command details figcaption figure footer header hgroup keygen mark meter nav output progress rp ruby section source summary time video".split(/\s+/),
l={htmlFor:"for",className:"class"},j=0;j<h.length;++j)g[h[j]]=L(h[j]);H(e.view);H(e.view.fn)})("jQuery"in this?jQuery:this,this);
