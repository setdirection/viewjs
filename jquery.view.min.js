(function(e){function y(f,g,i,h){h={data:h||(g?g.data:{}),_wrap:g?g._wrap:null,tmpl:null,parent:g||null,nodes:[],calls:H,nest:M,wrap:I,html:v,update:D};f&&e.extend(h,f,{nodes:[],parent:g});if(i){h.tmpl=i;h._ctnt=h._ctnt||h.tmpl(e,h);h.key=++s;(z.length?A:r)[s]=h}return h}function q(f,g,i){var h;i=i?e.map(i,function(k){return typeof k==="string"?f.key?k.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+w+'="'+f.key+'" $2'):k:q(k,f,k._ctnt)}):f;if(g)return i;i=i.join("");i.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,
function(k,m,n,a){h=e(n).get();J(h);if(m)h=E(m).concat(h);if(a)h=h.concat(E(a))});return h?h:E(i)}function E(f){var g=document.createElement("div");g.innerHTML=f;return e.makeArray(g.childNodes)}function K(f){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+e.trim(f).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,
function(g,i,h,k,m,n,a){g=e.tmpl.tag[h];if(!g)throw"Template command not found: "+h;h=g._default||[];if(n&&!/\w$/.test(m)){m+=n;n=""}if(m){m=B(m);a=a?","+B(a)+")":n?")":"";a=n?m.indexOf(".")>-1?m+B(n):"("+m+").call($item"+a:m;n=n?a:"(typeof("+m+")==='function'?("+m+").call($item):("+m+"))"}else n=a=h.$1||"null";k=B(k);return"');"+g[i?"close":"open"].split("$notnull_1").join(m?"typeof("+m+")!=='undefined' && ("+m+")!=null":"true").split("$1a").join(n).split("$1").join(a).split("$2").join(k||h.$2||
"")+"_.push('"})+"');}return _;")}function F(f,g){f._wrap=q(f,true,e.isArray(g)?g:[G.test(g)?g:e(g).html()]).join("")}function B(f){return f?f.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function J(f){function g(b){function c(x){x+=i;o=m[x]=m[x]||y(o,r[o.parent.key+i]||o.parent)}var j,l=b,o,t;if(t=b.getAttribute(w)){for(;l.parentNode&&(l=l.parentNode).nodeType===1&&!(j=l.getAttribute(w)););if(j!==t){l=l.parentNode?l.nodeType===11?0:l.getAttribute(w)||0:0;if(!(o=r[t])){o=A[t];o=y(o,r[l]||A[l]);
o.key=++s;r[s]=o}u&&c(t)}b.removeAttribute(w)}else if(u&&(o=e.data(b,"tmplItem"))){c(o.key);r[o.key]=o;l=(l=e.data(b.parentNode,"tmplItem"))?l.key:0}if(o){for(j=o;j&&j.key!=l;){j.nodes.push(b);j=j.parent}delete o._ctnt;delete o._wrap;e.data(b,"tmplItem",o)}}var i="_"+u,h,k,m={},n,a,d;n=0;for(a=f.length;n<a;n++)if((h=f[n]).nodeType===1){k=h.getElementsByTagName("*");for(d=k.length-1;d>=0;d--)g(k[d]);g(h)}}function H(f,g,i,h){if(!f)return z.pop();z.push({_:f,tmpl:g,item:this,data:i,options:h})}function M(f,
g,i){return e.tmpl(e.template(f),g,i,this)}function I(f,g){var i=f.options||{};i.wrapped=g;return e.tmpl(e.template(f.tmpl),f.data,i,f.item)}function v(f,g){var i=this._wrap;return e.map(e(e.isArray(i)?i.join(""):i).filter(f||"*"),function(h){if(g)h=h.innerText||h.textContent;else{var k;if(!(k=h.outerHTML)){k=document.createElement("div");k.appendChild(h.cloneNode(true));k=k.innerHTML}h=k}return h})}function D(){var f=this.nodes;e.tmpl(null,null,null,this).insertBefore(f[0]);e(f).remove()}var C=e.fn.domManip,
w="_tmplitem",G=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,r={},A={},p,L={key:0,data:{}},s=0,u=0,z=[];e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,g){e.fn[f]=function(i){var h=[];i=e(i);var k,m,n;k=this.length===1&&this[0].parentNode;p=r||{};if(k&&k.nodeType===11&&k.childNodes.length===1&&i.length===1){i[g](this[0]);h=this}else{m=0;for(n=i.length;m<n;m++){u=m;k=(m>0?this.clone(true):this).get();e(i[m])[g](k);h=h.concat(k)}u=0;
h=this.pushStack(h,f,i.selector)}i=p;p=null;e.tmpl.complete(i);return h}});e.fn.extend({tmpl:function(f,g,i){return e.tmpl(this[0],f,g,i)},tmplItem:function(){return e.tmplItem(this[0])},template:function(f){return e.template(f,this[0])},domManip:function(f,g,i){if(f[0]&&e.isArray(f[0])){for(var h=e.makeArray(arguments),k=f[0],m=k.length,n=0,a;n<m&&!(a=e.data(k[n++],"tmplItem")););if(a&&u)h[2]=function(d){e.tmpl.afterManip(this,d,i)};C.apply(this,h)}else C.apply(this,arguments);u=0;p||e.tmpl.complete(r);
return this}});e.extend({tmpl:function(f,g,i,h){var k=!h;if(k){h=L;f=e.template[f]||e.template(null,f);A={}}else if(!f){f=h.tmpl;r[h.key]=h;h.nodes=[];h.wrapped&&F(h,h.wrapped);return e(q(h,null,h.tmpl(e,h)))}if(!f)return[];if(typeof g==="function")g=g.call(h||{});i&&i.wrapped&&F(i,i.wrapped);g=e.isArray(g)?e.map(g,function(m){return m?y(i,h,f,m):null}):[y(i,h,f,g)];return k?e(q(h,null,g)):g},tmplItem:function(f){var g;if(f instanceof e)f=f[0];for(;f&&f.nodeType===1&&!(g=e.data(f,"tmplItem"))&&(f=
f.parentNode););return g||L},template:function(f,g){if(g){if(typeof g==="string")g=K(g);else if(g instanceof e)g=g[0]||{};if(g.nodeType)g=e.data(g,"tmpl")||e.data(g,"tmpl",K(g.innerHTML));return typeof f==="string"?e.template[f]=g:g}return f?typeof f!=="string"?e.template(null,f):e.template[f]||e.template(null,G.test(f)?f:e(f)):null},encode:function(f){return(""+f).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},
open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},
"!":{open:""}},complete:function(){r={}},afterManip:function(f,g,i){var h=g.nodeType===11?e.makeArray(g.childNodes):g.nodeType===1?[g]:[];i.call(f,g);J(h);u++}})})(jQuery);
(function(e,y,q){function E(a,d){for(var b=["bind","unbind","one"],c=0;c<b.length;++c)(function(j){d[j]=u(d[j],function(l){var o=p(arguments).slice(1);a[j].apply(a,o);return l.apply(l,o)})})(b[c])}function K(a,d){var b=p(arguments).slice(1);b=a.apply(a,b);d=="ready"&&F(this);return b}function F(a){if(!a._readyEventFired&&a._element&&z(a._element)){a.trigger("ready");a._readyEventFired=true;a._readyEventInterval&&clearInterval(a._readyEventInterval)}else"_readyEventInterval"in a||setTimeout(function(){if(a._element&&
z(a._element)){a.trigger("ready");a._readyEventFired=true}else a._readyEventInterval=setInterval(function(){if(a._element&&z(a._element)){a.trigger("ready");a._readyEventFired=true;clearInterval(a._readyEventInterval);a._readyEventInterval=false}},10)})}function B(a,d,b,c){if(!(c===q||c===null||c===false)){if(typeof c==="function"&&!D(c))c=c();if(c&&c.element&&c.element().nodeType==1&&c._attributes||typeof c.element=="function")d.push(c.element());else if(D(c))d.push((new c).element());else{if(typeof c===
"function")c=c();if(typeof c!=="string"&&typeof c!=="number"&&!r(c)&&!C(c)&&!(c&&(c.nodeType===1||c.nodeType===3)))for(attribute_name in c)b[attribute_name]=c[attribute_name];else{if(G(a,c))c=a.render(c);if(C(c))c=c.toArray();if(r(c)){var j=H(c);for(c=0;c<j.length;++c)B(a,d,b,j[c])}else if(w(c)){a=f?e(c):[c];for(c=0;c<a.length;++c)d.push(a[c])}else if(c&&(c.nodeType===1||c.nodeType===3)||typeof c==="string"||typeof c==="number")d.push(c)}}}}function J(a){var d,b,c,j,l;j=[];b={};for(d=1;d<arguments.length;++d)B(this,
j,b,arguments[d]);a=a.toLowerCase();if(f){if(document.attachEvent&&!y.opera&&(b.name||a=="input"&&b.type)){tag="<"+a;if(b.name)tag+=' name="'+b.name+'"';if(a=="input"&&b.type)tag+=' type="'+b.type+'"';tag+=">";delete b.name;delete b.type;l=document.createElement(tag)}else{h[a]||(h[a]=document.createElement(a));l=h[a].cloneNode(false)}e(l).attr(b);for(d=0;d<j.length;++d)j[d]&&(j[d].nodeType===1||j[d].nodeType===3)?l.appendChild(j[d]):l.appendChild(document.createTextNode(String(j[d])))}else{l="<"+
a;for(c in b)l+=" "+(m[c]||c)+'="'+b[c]+'"';if(j.length==0)l+=" />";else{l+=">";for(d=0;d<j.length;++d)l+=j[d];l+="</"+a+">"}}return l}function H(a){for(var d=[],b=0;b<a.length;++b)if(r(a[b]))d=d.concat(H(a[b]));else d.push(a[b]);return d}function M(a){return function(){for(var d=[a],b=0;b<arguments.length;++b)d.push(arguments[b]);return J.apply(this,d)}}function I(a){for(var d in i)d in a||(a[d]=i[d])}function v(a,d){for(var b in d)a[b]=d[b];return a}function D(a){return a&&a.prototype&&a.prototype._structure&&
a.prototype.element}function C(a){return typeof a=="object"&&"jquery"in a&&"length"in a}function w(a){return typeof a=="string"&&a.match(/^<[\w\W]+>/)}function G(a,d){if(typeof d!="string"||!a||!("constructor"in a&&"engine"in a.constructor))return false;var b=a.constructor.engine();if(b=="mustache")return d.match(/\{\{[^\}]+\}\}/);else if(b=="jquery.tmpl")return d.match(/\$\{[^\}]+\}/)}function r(a){return Object.prototype.toString.call(a)==="[object Array]"}function A(a,d){if(d.indexOf)return d.indexOf(a);
for(var b=0,c=d.length;b<c;b++)if(d[b]===a)return b;return-1}function p(a){if(!a)return[];for(var d=a.length||0,b=Array(d);d--;)b[d]=a[d];return b}function L(a){for(var d=p(arguments).slice(1),b=[],c=0;c<a.length;c++)A(a[c],d)>-1||b.push(a[c]);return b}function s(a,d){if(d===q)return a;if(arguments.length<3)return function(){return a.apply(d,arguments)};else{var b=p(arguments);b.shift();b.shift();return function(){return a.apply(d,b.concat(p(arguments)))}}}function u(a,d){return function(){return d.apply(this,
[s(a,this)].concat(p(arguments)))}}function z(a){for(a=a;a.parentNode;)a=a.parentNode;return!!a.body}var f="fn"in e&&"jquery"in e.fn;if(f&&Number(e.fn.jquery.replace(/\./g))<143)throw"jQuery View requires jQuery 1.4.3 or later.";e.view=function(a,d,b){var c;if(D(a)){c=a;a=d;d=b}if(typeof a=="string"){var j=String(a);a=function(){return j}}b=function t(){this._delegates=[];this._observers={};this._attributes={};this._changes={};for(var x=0;x<this.constructor._methodsToProxy.length;++x)this[this.constructor._methodsToProxy[x]]=
s(this[this.constructor._methodsToProxy[x]],this);this.initialize.apply(this,arguments);t._observers&&"ready"in t._observers&&F(this)};b._methodsToProxy=[];for(var l in d)b._methodsToProxy.push(l);b._observers={};b._instance=false;v(b,e.view.classMethods);if(c){v(b.prototype,c.prototype);b.prototype._structure=u(c.prototype._structure,function(t){t=s(t,this)();return a.apply(this,[t])||t});for(l=0;l<c._methodsToProxy.length;++l)b._methodsToProxy.push(c._methodsToProxy[l])}else{v(b.prototype,e.view.fn);
b.prototype._structure=a}b.prototype.bind=u(b.prototype.bind,K);if(c){b._observers={};for(var o in c._observers)b._observers[o]=c._observers[o];b.prototype._observers={};E(b,c)}v(b.prototype,d||{});return b};e.view.classMethods={instance:function a(a){if(a===q){if(!this._instance)this._instance=new this}else this._instance=a;return this._instance},bind:function(a,d){var b=p(arguments);if(b[2]===q)b[2]=this;d=s.apply(e.view,[d].concat(b.slice(2)));if(typeof a==="string"&&d!==q){a in this._observers||
(this._observers[a]=[]);this._observers[a].push(d)}return d},unbind:function(a,d){a in this._observers||(this._observers[a]=[]);if(a&&d)this._observers[a]=L(this._observers[a],d);else if(a)this._observers[a]=[];else this._observers={}},one:function(a,d){var b=p(arguments);if(b[2]===q)b[2]=this;d=s.apply(e.view,[d].concat(b.slice(2)));var c=s(function(){var j=d.apply(this,arguments);this.unbind(a,c);return j},this);a in this._observers||(this._observers[a]=[]);this._observers[a].push(c);return c},
trigger:function(a){if(!this._observers||!this._observers[a]||this._observers[a]&&this._observers[a].length==0)return[];a in this._observers||(this._observers[a]=[]);for(var d=[],b=p(arguments).slice(1),c=0;c<this._observers[a].length;++c){var j=this._observers[a][c].apply(this._observers[a][c],b);if(j===false)return false;else d.push(j)}return d},ready:function(){var a=p(arguments);a.unshift("ready");return this.bind.apply(this,a)},engine:function a(a){if(a===q)return this._engine===q?e.view.defaultEngine:
this._engine;else this._engine=a}};e.view.fn={initialize:function(a){this.length=0;e.view.logging&&console.log("jQuery.View: initialized ",this," with attributes:",a);this.attributes(a||{});(a=this._structure())&&!this._element&&this.element(a);if(f&&(!this._element||!this._element.nodeType||this._element.nodeType!==1))throw"The view constructor must return either a DOM element or jQuery object, or call this.element() with a DOM element. View constructor returned:"+typeof this._element;this.trigger("initialized")},
element:function a(a){if(a!==q){if(G(this,a))a=this.render(a);if(w(a))a=f?e(a)[0]:a;else if(C(a))a=a[0];this._element=a;this.length=1;this[0]=this._element;if(this._delegates.length>0){for(var d=0;d<this._delegates.length;++d)this.delegate(this._delegates[d][0],this._delegates[d][1],this._delegates[d][2]);this._delegates=[]}}return this._element},attributes:function a(a,d){if(a!==q){var b={},c;for(c in this._attributes)b[c]=true;for(c in a){delete b[c];this.set(c,a[c],true)}for(c in b){this._changes[c]=
null;delete this._attributes[b[c]]}d===q&&this.trigger("change",this._changes,this);this._changes={}}return this._attributes},get:function(a){return this._attributes[a]},set:function(a,d,b){this._attributes[a]=d;this._changes[a]=d;if(b===q){this.trigger("change",this._changes);this._changes={}}return d},bind:e.view.classMethods.bind,unbind:e.view.classMethods.unbind,one:e.view.classMethods.one,trigger:function(a){if((!this.constructor._observers||!this.constructor._observers[a]||this.constructor._observers[a]&&
this.constructor._observers[a].length==0)&&(!this._observers||!this._observers[a]||this._observers[a]&&this._observers[a].length==0))return[];var d=p(arguments).slice(1),b=[];constructor_args=p(arguments).slice(1);constructor_args.unshift(this);constructor_args.unshift(a);var c=this.constructor.trigger.apply(this.constructor,constructor_args);if(c===false)return false;b=b.concat(c);a in this._observers||(this._observers[a]=[]);for(var j=0;j<this._observers[a].length;++j){c=this._observers[a][j].apply(this._observers[a][j],
d);if(c===false)return false;else b.push(c)}return b},ready:e.view.classMethods.ready,emit:function(){var a=p(arguments);return s(function(){return this.trigger.apply(this,a)},this)},map:function(a,d){var b=[];if(r(a))for(var c=0;c<a.length;++c)b.push(d.apply(this,[a[c],c]));else for(c in a)b.push(d.apply(this,[c,a[c]]));return b},delegate:function(a,d,b,c){if(c)b=s(b,c);this._element?e(this._element).delegate(a,d,b):this._delegates.push([a,d,b])},escape:function(a){return document.createTextNode(a)},
render:function(a,d){var b=this.constructor.engine();if(!g[b]){if(b!="mustache"&&b!="jquery.tmpl")throw'jQuery View error: "'+b+'" is not a supported template engine.';if(b=="mustache"&&!("Mustache"in y))throw"jQuery View error: Mustache engine required to render template strings, download from http://wiki.github.com/janl/mustache.js/";if(b=="jquery.tmpl"&&!("tmpl"in e))throw"jQuery View error: jQuery Template engine required to render template strings, download from https://github.com/jquery/jquery-tmpl";
g[b]=true}var c={},j;for(j in this)if(A(j,["_delegates","_observers","_attributes","_changes"])==-1)c[j]=this[j];v(c,this.attributes());v(c,d);if(b=="jquery.tmpl")return e.tmpl(a,c);else if(b=="mustache")return Mustache.to_html(a,c)}};e.view.logging=false;e.view.defaultEngine="jquery.tmpl";for(var g={},i={},h={},k="a abbr acronym address applet area b base basefont bdo big blockquote body br button canvas caption center cite code col colgroup dd del dfn dir div dl dt em embed fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link menu meta nobr noframes noscript object ol optgroup option p param pre q s samp script select small span strike strong style sub sup table tbody td textarea tfoot th thead title tr tt u ul var article aside audio command details figcaption figure footer header hgroup keygen mark meter nav output progress rp ruby section source summary time video".split(/\s+/),
m={htmlFor:"for",className:"class"},n=0;n<k.length;++n)i[k[n]]=M(k[n]);I(e.view);I(e.view.fn)})("jQuery"in this?jQuery:this,this);
