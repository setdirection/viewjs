<!DOCTYPE html>
<html>
  <head>
    <title>jQuery View</title>
    <link rel="stylesheet" media="screen" href="screen.css"/>
  </head>
  <body>
    <h1 id='jquery_view'>jQuery View</h1>

<p><strong>Download:</strong> <a href='https://github.com/syntacticx/viewjs/zipball/master'>Development</a> | <a href='https://github.com/syntacticx/viewjs/raw/master/jquery.view.min.js'>Production (4KB)</a><br /><strong>See Also:</strong> <a href='http://modeljs.com/'>jQuery Model</a> | <a href='http://routesjs.com/'>jQuery Routes</a></p>

<p>A DOM centric class and inheritence system for jQuery.</p>

<h2 id='class_creation'>Class Creation</h2>

<h3 id='viewfunction_builder_object_instance_methods__classviewobject_parent_class_function_builder_object_instance_methods__class'>$.view<em>(Function builder [,Object instance_methods]) -&gt; Class</em><br />$.view<em>(Object parent_class, Function builder [,Object instance_methods]) -&gt; Class</em></h3>

<p>Creates a new View class.</p>

<pre><code>MyView = $.view(function(){
  return this.div();
},{
  myMethod: function(){}
});</code></pre>

<h3 id='subclasses'>Subclasses</h3>

<p>Views can be subclassed by passing a View class as the first argument to <strong>$.view</strong>. The constructor will receive the parent&#8217;s element as the only argument.</p>

<pre><code>MyViewTwo = $.view(MyView,function(element){
  $(element).addClass(&#39;two&#39;);
  this.ready(function(){
    //do something special only in this subclass
  });
});</code></pre>

<h3 id='singletons'>Singletons</h3>

<p>View classes implement a variant of the <a href='http://en.wikipedia.org/wiki/Singleton_pattern'>Singleton pattern</a> with the <strong>instance</strong> method. This method will return the same instance of a view every time it is called, or will create it if <strong>instance</strong> is being called for the first time on that class.</p>

<pre><code>var instance = MyView.instance();</code></pre>

<h2 id='builder'>Builder</h2>

<h3 id='instancetagstring_text_element_object_attributes__element'>instance.tag<em>([String text] [,Element] [,Object attributes]) -&gt; Element</em></h3>

<p>All HTML tag names are available as methods inside of View classes. Each view method takes a variable number of arguments which can be passed in any order and returns a DOM element. Possible arguments are: A hash of HTML attributes:</p>

<pre><code>this.a({href:&#39;#&#39;,className:&#39;my_link&#39;});</code></pre>

<p>A string:</p>

<pre><code>this.p(&#39;Paragraph text.&#39;);</code></pre>

<p>DOM Elements:</p>

<pre><code>this.ul({className:&#39;my_list&#39;},
  this.li(&#39;Item One&#39;)
  this.li(this.b(&#39;Bold List Item Two&#39;))
);</code></pre>

<p>HTML strings can be mixed and matched:</p>

<pre><code>this.form(
  &#39;&lt;p class=&quot;label&quot;&gt;Author&lt;/p&gt;&#39;,
  this.input({name:&#39;author&#39;,type:&#39;text&#39;}),
  this.p({className:&#39;label&#39;},&#39;Body &lt;b&gt;Required&lt;/b&gt;&#39;),
  &#39;&lt;textarea name=&quot;body&quot;&gt;&lt;/textarea&gt;&#39;
);</code></pre>

<p>jQuery objects can be used. Any instance methods defined by the class will automatically be proxied, so &#8220;this&#8221; will always refer to the view instance if passed to an event handler.</p>

<pre><code>MyView = $.view(function(){
  return this.ul(
    this.li(
      $(this.a({href:&#39;#&#39;},&#39;My Link&#39;)).click(this.handleClick)
    )
  );
},{
  handleClick: function(event){
    //this == MyView instance
    var element = event.target;
    return false;
  }
});</code></pre>

<p>An array of strings, object attributes or DOM elements can be used.</p>

<pre><code>this.ul(
  this.li(&#39;Item One&#39;),
  [
    this.li(&#39;Item Two&#39;),
    this.li(&#39;Item Three&#39;)
  ]
);</code></pre>

<p>The <strong>map</strong> method returns an Array and is designed to be used with builder methods. It accepts an array or object. &#8220;this&#8221; will always refer to the view instance inside of the iterator.</p>

<pre><code>this.ul(
  this.map([&#39;One&#39;,&#39;Two&#39;,&#39;Three&#39;],function(item,i){
    return this.li(&#39;Item &#39; + item);
  })
);
this.ul(
  this.map({
    &#39;jQuery&#39;: &#39;http://jquery.com/&#39;,
    &#39;NodeJS&#39;: &#39;http://nodejs.org/&#39;
  },function(key,value){
    return this.li(this.a({href:value},key));
  })
);</code></pre>

<p>Methods that are used will be called:</p>

<pre><code>this.ul(this.generateListItems);</code></pre>

<p>View classes and view instances can also be used:</p>

<pre><code>this.ul(
  this.li(&#39;Item Two&#39;),
  ListItemView, //will be initialized with no attributes
  new ListItemView({name:&#39;Item Three&#39;})
);</code></pre>

<p>Builder methods are also available in the <strong>$.view</strong> object if builder methods are needed outside of view classes:</p>

<pre><code>MyView.classMethod = function(){
  return $.view.div();
};</code></pre>

<h2 id='events'>Events</h2>

<p>View class</p>

<p>Each View class has the same event method names as jQuery: <strong>bind</strong>, <strong>unbind</strong>, <strong>one</strong>, <strong>trigger</strong>. Unlike jQuery/DOM events, there is no Event object, and the event handlers can take an arbi</p>

<p>Events are created with the <strong>trigger</strong> method. All arguments passed to trigger are passed to any registered event handlers. If any event handler returns false, the call to <strong>trigger</strong> will return false. Otherwise it will return an array of responses from the handlers.</p>

<pre><code>this.trigger(&#39;event_name&#39;,a,b);</code></pre>

<p>Events can be observed on all instances of a class. Handlers will receive the instance that triggered the event followed by any arguments passed in the event.</p>

<pre><code>MyView.bind(&#39;event_name&#39;,function(instance,a,b){

});</code></pre>

<p>View classes have two built in events. The <strong>ready</strong> event is triggered when the View&#8217;s element has been attached to the DOM. It can be accessed by the <strong>ready</strong> method or by calling <strong>bind(&#8216;ready&#8217;,handler)</strong>.</p>

<pre><code>MyView = $.view(function(){
  this.ready(function(){
    this.nameInput.focus();
  });
  return this.form(
    this.p({className:&#39;label&#39;,&#39;Name&#39;}),
    this.nameInput = this.input({type:&#39;text&#39;})
  );
});</code></pre>

<p>The <strong>changed</strong> event is triggered whenever attributes in the view have been changed.</p>

<pre><code>MyView.bind(&#39;changed&#39;,function(instance,changed_attributes){
  for(var key in changed_attributes){
    
  }
});</code></pre>

<h2 id='class_methods'>Class Methods</h2>

<h3 id='classinstance__instance'>Class.instance<em>() -&gt; instance</em></h3>

<h3 id='classbindstring_event_name_function_handler_object_context__function'>Class.bind<em>(String event_name, Function handler [,Object context]) -&gt; Function</em></h3>

<h3 id='classunbindstring_event_name_function_handler__null'>Class.unbind<em>([String event_name] [,Function handler]) -&gt; null</em></h3>

<h3 id='classonestring_event_name_function_handler_object_context__function'>Class.one<em>(String event_name, Function handler [,Object context]) -&gt; Function</em></h3>

<h3 id='classtriggerstring_event_name__array_or_false'>Class.trigger<em>(String event_name) -&gt; Array or false</em></h3>

<h3 id='classreadyfunction_handler_object_context__function'>Class.ready<em>(Function handler [,Object context]) -&gt; Function</em></h3>

<h2 id='instance_methods'>Instance Methods</h2>

<h3 id='new_classobject_attributes__instance'>new Class<em>([Object attributes]) -&gt; instance</em></h3>

<p>Creates a new instance of a View class.</p>

<pre><code>var instance = new MyView({
  key: &#39;value&#39;
});
$(instance).appendTo(document.body);</code></pre>

<h3 id='instanceelement__elementinstanceelementelement_element__element'>instance.element<em>() -&gt; Element</em><br />instance.element<em>(Element element) -&gt; Element</em></h3>

<p>Set or get the outermost element in the view. The element should only be set from within the view constructor.</p>

<pre><code>var instance = new MyView(function(){
  return this.div();
});
instance.element().tagName == &#39;div&#39;</code></pre>

<h3 id='instanceattributes__objectinstanceattributesobject_attributes__null'>instance.attributes<em>() -&gt; Object</em><br />instance.attributes<em>(Object attributes) -&gt; null</em></h3>

<h3 id='instancegetstring_key__mixed'>instance.get<em>(String key) -&gt; mixed</em></h3>

<h3 id='instancesetstring_keymixed_value__mixed'>instance.set<em>(String key,mixed value) -&gt; mixed</em></h3>

<h3 id='instancebindstring_event_name_function_handler_object_context__function'>instance.bind<em>(String event_name, Function handler [,Object context]) -&gt; Function</em></h3>

<h3 id='instanceunbindstring_event_name_function_handler__null'>instance.unbind<em>([String event_name] [,Function handler]) -&gt; null</em></h3>

<h3 id='instancereadyfunction_handler_object_context__function'>instance.ready<em>(Function handler [,Object context]) -&gt; Function</em></h3>

<h3 id='instanceonestring_event_name_function_handler_object_context__function'>instance.one<em>(String event_name, Function handler [,Object context]) -&gt; Function</em></h3>

<h3 id='instancetriggerstring_event_name__array_or_false'>instance.trigger<em>(String event_name) -&gt; Array or false</em></h3>

<h3 id='instancemapmixedfunction_iterator__array'>instance.map<em>(mixed,Function iterator) -&gt; Array</em></h3>

<p>Similar to Array#map or Ruby&#8217;s Array#collect. Works on objects or Arrays. If an object is passed the iterator will be called with (key,value), if an Array is passed the iterator will be called with (value,index). Inside the iterator &#8220;this&#8221; will always refer to the view instance.</p>

<pre><code>var NavigationView = $.view(function(){
  return this.ul(this.map({
    &#39;Page Title: &#39;http://page.com/&#39;
  },function(title,url){
    return this.li(
      this.a({href:url},title)
    );
  }));
});</code></pre>

<h3 id='instancedelegatestring_selectorstring_event_namefunction_callbackobject_context__null'>instance.delegate<em>(String selector,String event_name,Function callback[,Object context]) -&gt; null</em></h3>

<p>Equivelent to calling <a href='http://api.jquery.com/delegate/'>jQuery&#8217;s delegate</a> method, but can be called before the view&#8217;s element has been created.</p>

<pre><code>MyView = $.view(function(){
  this.delegate(&#39;a&#39;,&#39;click&#39;,this.handleClick);
  return this.ul(
    this.li(this.a({href:&#39;#&#39;},&#39;Link One&#39;)),
    this.li(this.a({href:&#39;#&#39;},&#39;Link Two&#39;))
  );
},{
  handleClick: function(){}
});</code></pre>

<h2 id='properties'>Properties</h2>

<h3 id='viewfn__object'>$.view.fn <em>-&gt; Object</em></h3>

<p>Methods that will be available to all instances of all view classes.</p>

<pre><code>$.view.fn.myMethod = function(){
  return this.get(&#39;key&#39;);
};
MyClass = $.view(function(){});
var instance = new MyClass({
  key: &#39;value&#39;
});
instance.myMethod(); //returns &quot;value&quot;</code></pre>

<h3 id='viewclassmethods__object'>$.view.classMethods <em>-&gt; Object</em></h3>

<p>Methods that are available to all view classes.</p>

<pre><code>$.view.classMethods.myClassMethod = function(){};
MyClass = $.view(function(){});
MyClass.myClassMethod();</code></pre>

<h3 id='viewlogging__boolean'>$.view.logging <em>-&gt; Boolean</em></h3>

<p>Set this to true to have view classes output console.log messages.</p>

<h2 id='examples'>Examples</h2>

<ul>
<li>nested views</li>

<li>modifying classes without modifying the original code (Class ready event)</li>

<li>string constructors / mustache templates / jquery templates</li>
</ul>

<h2 id='change_log'>Change Log</h2>

<p><strong>1.0.0</strong> - <em>Jan 7, 2011</em><br />Initial release.</p>
<hr />
<p>Copyright 2011 <a href='http://syntacticx.com/'>Syntacticx</a>. Released under the <a href='http://jquery.org/license'>MIT or GPL License</a>.<br />Style inspired by <a href='http://documentcloud.github.com/backbone/'>Backbone.js</a></p>
    <div id="toc"><ul>
<h1><a href='#jquery_view'>jQuery View</a></h1>
<h2><a href='#class_creation'>Class Creation</a></h2>
<h3>- <a href='#viewfunction_builder_object_instance_methods__classviewobject_parent_class_function_builder_object_instance_methods__class'>$.view</a></h3>
<h3>- <a href='#subclasses'>Subclasses</a></h3>
<h3>- <a href='#singletons'>Singletons</a></h3>
<h2><a href='#builder'>Builder</a></h2>
<h2><a href='#events'>Events</a></h2>
<h2><a href='#class_methods'>Class Methods</a></h2>
<h3>- <a href='#classinstance__instance'>instance</a></h3>
<h3>- <a href='#classbindstring_event_name_function_handler_object_context__function'>bind</a></h3>
<h3>- <a href='#classunbindstring_event_name_function_handler__null'>unbind</a></h3>
<h3>- <a href='#classonestring_event_name_function_handler_object_context__function'>one</a></h3>
<h3>- <a href='#classtriggerstring_event_name__array_or_false'>trigger</a></h3>
<h3>- <a href='#classreadyfunction_handler_object_context__function'>ready</a></h3>
<h2><a href='#instance_methods'>Instance Methods</a></h2>
<h3>- <a href='#new_classobject_attributes__instance'>new Class</a></h3>
<h3>- <a href='#instanceelement__elementinstanceelementelement_element__element'>element</a></h3>
<h3>- <a href='#instanceattributes__objectinstanceattributesobject_attributes__null'>attributes</a></h3>
<h3>- <a href='#instancegetstring_key__mixed'>get</a></h3>
<h3>- <a href='#instancesetstring_keymixed_value__mixed'>set</a></h3>
<h3>- <a href='#instancebindstring_event_name_function_handler_object_context__function'>bind</a></h3>
<h3>- <a href='#instanceunbindstring_event_name_function_handler__null'>unbind</a></h3>
<h3>- <a href='#instancereadyfunction_handler_object_context__function'>ready</a></h3>
<h3>- <a href='#instanceonestring_event_name_function_handler_object_context__function'>one</a></h3>
<h3>- <a href='#instancetriggerstring_event_name__array_or_false'>trigger</a></h3>
<h3>- <a href='#instancemapmixedfunction_iterator__array'>map</a></h3>
<h3>- <a href='#instancedelegatestring_selectorstring_event_namefunction_callbackobject_context__null'>delegate</a></h3>
<h2><a href='#properties'>Properties</a></h2>
<h3>- <a href='#viewfn__object'>fn </a></h3>
<h3>- <a href='#viewclassmethods__object'>classMethods </a></h3>
<h3>- <a href='#viewlogging__boolean'>logging </a></h3>
<h2><a href='#examples'>Examples</a></h2>
<h2><a href='#change_log'>Change Log</a></h2>
</ul></div>
  </body>
</html>
